package me.sevj6.pvp.listener.listeners.exploits;

import com.faris.kingkits.api.event.PlayerPreKitEvent;
import me.sevj6.pvp.util.Utils;
import org.bukkit.Material;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockPlaceEvent;

public class IllegalBlockUsage implements Listener {

    @EventHandler
    public void onKit(PlayerPreKitEvent event) {
        if (event.getKit().getItems().entrySet().stream().anyMatch(entry -> entry.getValue().getType() == Material.BEDROCK)) {
            event.setCancelled(true);
            event.getPlayer().getBukkitPlayer().getInventory().clear();
            Utils.sendMessage(event.getPlayer().getBukkitPlayer(), "&cDetected illegal blocks inside of your kit!");
        }
    }

    @EventHandler
    public void onPlace(BlockPlaceEvent event) {
        if (event.getBlockPlaced().getType().equals(Material.BEDROCK)) {
            event.getBlockPlaced().setType(Material.AIR);
        }
    }
}
